<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ë§Œì˜ CBT</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; }
        .container { max-width: 700px; margin: auto; background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .hidden { display: none; } /* í™”ë©´ ì „í™˜ì„ ìœ„í•œ CSS */
        
        /* í€´ì¦ˆ ê´€ë ¨ ìŠ¤íƒ€ì¼ */
        #question { font-size: 1.2em; font-weight: bold; margin-bottom: 20px; }
        .options-container { list-style: none; padding: 0; }
        .option { margin: 10px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
        .option:hover { background-color: #f5f5f5; }
        .option.selected { background-color: #dbeafe; border-color: #60a5fa; }
        .button { width: 100%; padding: 15px; font-size: 1.1em; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .primary-button { background-color: #0d6efd; }
        .primary-button:hover { background-color: #0b5ed7; }
        .secondary-button { background-color: #6c757d; }
        
        /* ë¬¸ì œ ê´€ë¦¬ í¼ ìŠ¤íƒ€ì¼ */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group textarea { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #ccc; box-sizing: border-box; }
        textarea { height: 150px; resize: vertical; }
    </style>
</head>
<body>

    <div class="container">
        <div id="quiz-view">
            <h2 id="quiz-header">ë‚˜ë§Œì˜ CBT</h2>
            <div id="quiz-body">
                <div id="question">ë¬¸ì œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                <ul class="options-container" id="options-container"></ul>
                <button id="submit-btn" class="button primary-button">ì •ë‹µ ì œì¶œ</button>
                <div id="results"></div>
            </div>
            <hr style="margin: 20px 0;">
            <button class="button secondary-button" onclick="showView('add-view')">âœï¸ í•œ ë¬¸ì œ ì¶”ê°€í•˜ê¸°</button>
            <button class="button secondary-button" onclick="showView('bulk-add-view')">ğŸ“š ì—¬ëŸ¬ ë¬¸ì œ ì¶”ê°€í•˜ê¸°</button>
            <button class="button secondary-button" onclick="showView('data-view')">ğŸ’¾ ë°ì´í„° ì €ì¥/ê´€ë¦¬</button>
        </div>

        <div id="add-view" class="hidden">
            <h2>âœï¸ í•œ ë¬¸ì œ ì¶”ê°€í•˜ê¸°</h2>
            <div class="form-group">
                <label for="new-question">ë¬¸ì œ</label>
                <input type="text" id="new-question" placeholder="ë¬¸ì œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label for="new-answer">ì •ë‹µ</label>
                <input type="text" id="new-answer" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label for="new-explanation">í•´ì„¤ (ì„ íƒ)</label>
                <input type="text" id="new-explanation" placeholder="í•´ì„¤ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label>ë³´ê¸° (ì •ë‹µ í¬í•¨ 2ê°œ ì´ìƒ)</label>
                <div id="new-options-container">
                    <input type="text" class="new-option" placeholder="ë³´ê¸° 1">
                    <input type="text" class="new-option" placeholder="ë³´ê¸° 2">
                </div>
                <button onclick="addOptionField()">ë³´ê¸° ì¶”ê°€</button>
            </div>
            <button class="button primary-button" onclick="addSingleQuestion()">ì¶”ê°€í•˜ê¸°</button>
            <button class="button secondary-button" onclick="showView('quiz-view')">â† ëŒì•„ê°€ê¸°</button>
        </div>
        
        <div id="bulk-add-view" class="hidden">
            <h2>ğŸ“š ì—¬ëŸ¬ ë¬¸ì œ ì¶”ê°€í•˜ê¸°</h2>
            <p>ì•„ë˜ ì–‘ì‹ì— ë§ì¶° ë¬¸ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê° ë¬¸ì œëŠ” '---'ë¡œ êµ¬ë¶„í•©ë‹ˆë‹¤.</p>
            <div class="form-group">
                <textarea id="bulk-text" placeholder="ë¬¸ì œ: ì²« ë²ˆì§¸ ë¬¸ì œ ë‚´ìš©
ë³´ê¸°: ë³´ê¸°1, ë³´ê¸°2, ë³´ê¸°3
ì •ë‹µ: ë³´ê¸°2
í•´ì„¤: ì²« ë²ˆì§¸ ë¬¸ì œ í•´ì„¤
---
ë¬¸ì œ: ë‘ ë²ˆì§¸ ë¬¸ì œ ë‚´ìš©
..."></textarea>
            </div>
            <button class="button primary-button" onclick="addBulkQuestions()">í•œ ë²ˆì— ì¶”ê°€í•˜ê¸°</button>
            <button class="button secondary-button" onclick="showView('quiz-view')">â† ëŒì•„ê°€ê¸°</button>
        </div>

        <div id="data-view" class="hidden">
            <h2>ğŸ’¾ ë°ì´í„° ì €ì¥/ê´€ë¦¬</h2>
            <p>ë¬¸ì œ ì¶”ê°€/ìˆ˜ì •ì´ ëë‚˜ë©´, ì•„ë˜ í…ìŠ¤íŠ¸ ì „ì²´ë¥¼ ë³µì‚¬(Ctrl+C)í•˜ì—¬ GitHubì˜ index.html íŒŒì¼ script íƒœê·¸ ì•ˆì˜ `let quizData = [...]` ë¶€ë¶„ì„ êµì²´í•´ì£¼ì„¸ìš”.</p>
            <div class="form-group">
                <textarea id="json-output" readonly></textarea>
            </div>
            <button class="button secondary-button" onclick="showView('quiz-view')">â† ëŒì•„ê°€ê¸°</button>
        </div>
    </div>

<script>
    // =======================================================
    // â–¼â–¼â–¼ ì´ ê³³ì— ë¬¸ì œ ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤ â–¼â–¼â–¼
    // =======================================================
    let quizData = [
        {
            "question": "ëŒ€í•œë¯¼êµ­ì˜ ìˆ˜ë„ëŠ” ì–´ë””ì¼ê¹Œìš”?",
            "options": ["ë¶€ì‚°", "ì„œìš¸", "ì¸ì²œ", "ëŒ€êµ¬"],
            "answer": "ì„œìš¸",
            "explanation": "ì„œìš¸ì€ ëŒ€í•œë¯¼êµ­ì˜ ìˆ˜ë„ì´ì ìµœëŒ€ ë„ì‹œì…ë‹ˆë‹¤."
        },
        {
            "question": "HTMLì€ ë¬´ì—‡ì˜ ì•½ìì¼ê¹Œìš”?",
            "options": ["Hyper Text Markup Language", "High Tool Markup Language", "Hyperlink and Text Markup Language"],
            "answer": "Hyper Text Markup Language",
            "explanation": "HTMLì€ ì›¹ í˜ì´ì§€ì˜ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” ë° ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ë§ˆí¬ì—… ì–¸ì–´ì…ë‹ˆë‹¤."
        },
        {
            "question": "CSSê°€ í•˜ëŠ” ì£¼ìš” ì—­í• ì€ ë¬´ì—‡ì¼ê¹Œìš”?",
            "options": ["ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬", "ì›¹í˜ì´ì§€ ìŠ¤íƒ€ì¼ë§", "ì„œë²„ ë¡œì§ ì²˜ë¦¬"],
            "answer": "ì›¹í˜ì´ì§€ ìŠ¤íƒ€ì¼ë§",
            "explanation": "CSS(Cascading Style Sheets)ëŠ” ì›¹ í˜ì´ì§€ì˜ ë””ìì¸ê³¼ ë ˆì´ì•„ì›ƒì„ ë‹´ë‹¹í•©ë‹ˆë‹¤."
        }
    ];
    // =======================================================
    // â–²â–²â–² ì´ ê³³ì— ë¬¸ì œ ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤ â–²â–²â–²
    // =======================================================

    // ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
    const views = ['quiz-view', 'add-view', 'bulk-add-view', 'data-view'];
    const questionEl = document.getElementById('question');
    const optionsContainer = document.getElementById('options-container');
    const submitBtn = document.getElementById('submit-btn');
    const resultsEl = document.getElementById('results');
    const quizHeaderEl = document.getElementById('quiz-header');

    let currentQuiz = 0;
    let score = 0;
    let selectedOption = null;

    /**
     * íŠ¹ì • IDì˜ í™”ë©´(view)ë§Œ ë³´ì—¬ì£¼ê³  ë‚˜ë¨¸ì§€ëŠ” ìˆ¨ê¹ë‹ˆë‹¤.
     * @param {string} viewId - ë³´ì—¬ì¤„ í™”ë©´ì˜ ID
     */
    function showView(viewId) {
        views.forEach(id => {
            document.getElementById(id).classList.toggle('hidden', id !== viewId);
        });

        // ë°ì´í„° ê´€ë¦¬ í™”ë©´ì„ ë³´ì—¬ì¤„ ë•Œ, í˜„ì¬ quizDataë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë³´ì—¬ì¤ë‹ˆë‹¤.
        if (viewId === 'data-view') {
            const jsonOutput = document.getElementById('json-output');
            // JSON.stringifyì˜ 3ë²ˆì§¸ ì¸ìëŠ” ë“¤ì—¬ì“°ê¸°(pretty-print)ë¥¼ ìœ„í•¨ì…ë‹ˆë‹¤.
            jsonOutput.value = `let quizData = ${JSON.stringify(quizData, null, 2)};`;
        }
        
        // í€´ì¦ˆ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°ˆ ë•Œ í€´ì¦ˆë¥¼ ë‹¤ì‹œ ë¡œë“œí•©ë‹ˆë‹¤.
        if (viewId === 'quiz-view') {
            loadQuiz();
        }
    }

    /**
     * í€´ì¦ˆë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
     */
    function loadQuiz() {
        if (quizData.length === 0) {
            quizHeaderEl.textContent = "ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.";
            document.getElementById('quiz-body').innerHTML = "<p>'ë¬¸ì œ ì¶”ê°€í•˜ê¸°' ë²„íŠ¼ì„ ëˆŒëŸ¬ ì²« ë¬¸ì œë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>";
            return;
        }

        // í€´ì¦ˆê°€ ëë‚˜ë©´ ê²°ê³¼ í‘œì‹œ
        if (currentQuiz >= quizData.length) {
            document.getElementById('quiz-body').innerHTML = `
                <h2>í€´ì¦ˆ ê²°ê³¼</h2>
                <p>ì´ ${quizData.length}ë¬¸ì œ ì¤‘ ${score}ë¬¸ì œë¥¼ ë§íˆì…¨ìŠµë‹ˆë‹¤!</p>
                <button class="button primary-button" onclick="location.reload()">ë‹¤ì‹œ í’€ê¸°</button>
            `;
            return;
        }
        
        quizHeaderEl.textContent = `ë‚˜ë§Œì˜ CBT (${quizData.length}ë¬¸ì œ)`;
        selectedOption = null;
        resultsEl.innerHTML = '';
        submitBtn.textContent = 'ì •ë‹µ ì œì¶œ';

        const currentQuizData = quizData[currentQuiz];
        questionEl.textContent = (currentQuiz + 1) + ". " + currentQuizData.question;
        
        optionsContainer.innerHTML = '';
        currentQuizData.options.forEach(optionText => {
            const optionEl = document.createElement('li');
            optionEl.classList.add('option');
            optionEl.textContent = optionText;
            optionEl.addEventListener('click', () => {
                const currentSelected = document.querySelector('.option.selected');
                if (currentSelected) {
                    currentSelected.classList.remove('selected');
                }
                optionEl.classList.add('selected');
                selectedOption = optionText;
            });
            optionsContainer.appendChild(optionEl);
        });
    }

    /**
     * ì •ë‹µ ì œì¶œ ë²„íŠ¼ ë¡œì§
     */
    submitBtn.addEventListener('click', () => {
        if (selectedOption) {
            if (selectedOption === quizData[currentQuiz].answer) {
                score++;
            }
            currentQuiz++;
            loadQuiz(); // ë‹¤ìŒ ë¬¸ì œ ë¡œë“œ ë˜ëŠ” ê²°ê³¼ í‘œì‹œ
        } else {
            alert("ë³´ê¸°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
        }
    });

    /**
     * 'í•œ ë¬¸ì œ ì¶”ê°€' í¼ì—ì„œ ë³´ê¸° ì…ë ¥ í•„ë“œë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
     */
    function addOptionField() {
        const container = document.getElementById('new-options-container');
        const input = document.createElement('input');
        input.type = 'text';
        input.className = 'new-option';
        input.placeholder = `ë³´ê¸° ${container.children.length + 1}`;
        container.appendChild(input);
    }
    
    /**
     * 'í•œ ë¬¸ì œ ì¶”ê°€' í¼ì˜ ë°ì´í„°ë¥¼ quizData ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
     */
    function addSingleQuestion() {
        const question = document.getElementById('new-question').value.trim();
        const answer = document.getElementById('new-answer').value.trim();
        const explanation = document.getElementById('new-explanation').value.trim();
        
        const optionNodes = document.querySelectorAll('.new-option');
        const options = Array.from(optionNodes).map(input => input.value.trim()).filter(Boolean);

        if (!question || !answer || options.length < 2) {
            alert("ë¬¸ì œ, ì •ë‹µ, ê·¸ë¦¬ê³  ìµœì†Œ 2ê°œ ì´ìƒì˜ ë³´ê¸°ë¥¼ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.");
            return;
        }
        
        if (!options.includes(answer)) {
            alert("ë³´ê¸°ì— ì •ë‹µì´ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.");
            return;
        }

        quizData.push({ question, options, answer, explanation });
        alert("ë¬¸ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! 'ë°ì´í„° ì €ì¥/ê´€ë¦¬' í™”ë©´ì—ì„œ ë³€ê²½ì‚¬í•­ì„ ë³µì‚¬í•˜ì—¬ ì €ì¥í•˜ì„¸ìš”.");
        
        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
        document.getElementById('new-question').value = '';
        document.getElementById('new-answer').value = '';
        document.getElementById('new-explanation').value = '';
        document.getElementById('new-options-container').innerHTML = `
            <input type="text" class="new-option" placeholder="ë³´ê¸° 1">
            <input type="text" class="new-option" placeholder="ë³´ê¸° 2">`;
            
        showView('quiz-view'); // í€´ì¦ˆ í™”ë©´ìœ¼ë¡œ ë³µê·€
    }

    /**
     * 'ì—¬ëŸ¬ ë¬¸ì œ ì¶”ê°€' í¼ì˜ í…ìŠ¤íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ quizData ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.
     */
    function addBulkQuestions() {
        const bulkText = document.getElementById('bulk-text').value.trim();
        if (!bulkText) {
            alert("ì¶”ê°€í•  ë¬¸ì œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”.");
            return;
        }
        
        const questionBlocks = bulkText.split('---');
        let addedCount = 0;
        
        questionBlocks.forEach(block => {
            block = block.trim();
            if (!block) return;

            const lines = block.split('\n');
            const qData = {};

            lines.forEach(line => {
                if (line.toLowerCase().startsWith('ë¬¸ì œ:')) {
                    qData.question = line.substring(3).trim();
                } else if (line.toLowerCase().startsWith('ë³´ê¸°:')) {
                    qData.options = line.substring(3).trim().split(',').map(s => s.trim());
                } else if (line.toLowerCase().startsWith('ì •ë‹µ:')) {
                    qData.answer = line.substring(3).trim();
                } else if (line.toLowerCase().startsWith('í•´ì„¤:')) {
                    qData.explanation = line.substring(3).trim();
                }
            });

            if (qData.question && qData.answer && qData.options) {
                quizData.push(qData);
                addedCount++;
            }
        });

        if (addedCount > 0) {
            alert(`${addedCount}ê°œì˜ ë¬¸ì œê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! 'ë°ì´í„° ì €ì¥/ê´€ë¦¬' í™”ë©´ì—ì„œ ë³€ê²½ì‚¬í•­ì„ ë³µì‚¬í•˜ì—¬ ì €ì¥í•˜ì„¸ìš”.`);
            document.getElementById('bulk-text').value = ''; // ì…ë ¥ì°½ ë¹„ìš°ê¸°
            showView('quiz-view'); // í€´ì¦ˆ í™”ë©´ìœ¼ë¡œ ë³µê·€
        } else {
            alert("ì¶”ê°€í•  ë¬¸ì œë¥¼ ì°¾ì§€ ëª»í–ˆê±°ë‚˜ ì–‘ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        }
    }

    // í˜ì´ì§€ ì²« ë¡œë“œ ì‹œ í€´ì¦ˆ ì‹œì‘
    loadQuiz();
</script>

</body>
</html>
